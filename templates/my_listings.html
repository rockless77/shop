{% extends 'base.html' %}
{% block content %}
  <h2>My Listings</h2>

  {% if products %}
    <ul>
      {% for p in products %}
        <li style="margin-bottom:1em;">
          <h3>{{ p.name }}</h3>
          <p>{{ p.description or '(No description)' }}</p>
          <p><strong>Price:</strong> ${{ '%.2f'|format(p.price) }}</p>

          <!-- now these endpoints exist: -->
          <a href="{{ url_for('edit_product', product_id=p.id) }}">Edit</a>
          |
          <form action="{{ url_for('delete_product', product_id=p.id) }}"
                method="POST"
                style="display:inline;"
                onsubmit="return confirm('Delete this listing?');">
            <button type="submit">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>You havenâ€™t listed any items yet.</p>
  {% endif %}
{% endblock %}
